#১.২ $GOPATH এবং ওয়ার্কস্পেস
## $GOPATH

গো এর কোড সাজানোর পদ্ধতি একটু আলাদা। গো এর সোর্সকোড `$GOPATH` ফোল্ডারে থাকে। এইখানে আপনি আপনার গো কোড রাখবেন। একটি কথা মনে রাখা উচিত, `$GOPATH` এ আপনার সোর্সকোড থাকে আর `$GOROOT` হচ্ছে গো এর এনভায়রনমেন্ট ডিরেক্টরি যেখানে গো ইনস্টল করা আছে।
আপনি যদি *nix ব্যবহারকারী হয়ে থাকেন তাইলে আপনার `$GOPATH` আপনি `.bashrc` ফাইলের শেষে লিখে দিবেন।


*nix অপারেটিংসিস্টেম এর `$GOPATH` সাধারানত নিম্নের হয়ে থাকে

	export GOPATH=/home/apple/mygo

আপনি যদি উইন্ডোজ বাবহারকারী হয়ে থাকেন তাহলে আপনি নতুন একটি এনভায়রনমেন্ট ভ্যারিয়েবেল নিম্নের মত করে সেট করবেন।  
`c:\mygo`( ***এই ভ্যালু আপনার ওয়ার্কস্পেস এর পাথ হবে*** )

আপনি চাইলে একাধিক ওয়ার্কস্পেস তৈরি করতে পারেন, এ জন্য আপানাকে `:` (উইন্ডোজের জন্য `;`) ব্যবহার করে পাথ আলাদা করে দিতে হবে। আপনি যখন `go get` কমান্ড ব্যবহার করে কোন প্যকেজ ইনস্টল করবেন তখন প্যকেজ প্রথম ওয়ার্কস্পেসে সংরক্ষিত হবে।


`$GOPATH` এ আপনি নিম্নের তিনটি ফোল্ডার তৈরি করবেনঃ

- `src` এই ফোল্ডারে সোর্স ফাইল থাকবে যেগুলোর শেষে  .go, .c, .g, .s থাকবে
- `pkg` এই ফোল্ডারে কম্পাইল করা ফাইল থাকবে যার শেষে .a থাকবে
- `bin` এই ফোল্ডারে এক্সিকিউটেবল ফাইল থাকবে

এই বইটিতে আমরা `$GOPATH` হিসেবে `mygo` ব্যবহার করব

## প্যাকেজ ফোল্ডার

`$GOPATH/src/mymath/sqrt.go` এইখানে একটি প্যাকেজ সোর্স ফাইল তৈরি করি (`mymath` হল প্যাকেজের নাম্‌ , প্যাকেজের সোর্স ফাইল যে ফোল্ডারে থাকে সেই নাম এ প্যকেজের নাম)

আপনি যদি প্যাকেজ তৈরি করতে চান সেক্ষেত্রে আপানাকে `src` ফোল্ডারে প্রবেশ করে আপানার প্যাকেজের নাম দিয়ে একটি ফোল্ডার খুলতে হবে। আপনি চাইলে মাল্টি-লেভেল ফোল্ডার তৈরি করতে পারেন।
যেমন আপনি যদি `$GOPATH/src/github.com/astaxie/beedb` এমন একটি ফোল্ডার তৈরি করেন তাইলে আপনার প্যাকেজ পাথ হবে `github.com/astaxie/beedb`। আপনার প্যাকেজের নাম হবে শেষ ফোল্ডারের নাম যেটিতে সোর্স ফাইলে থাকবে, এক্ষেত্রে `beedb` হচ্ছে প্যাকেজের নাম।

চলুন এবার কাজ শুরু করা যাক

	cd $GOPATH/src
	mkdir mymath

`sqrt.go` নামে একটি ফাইল তৈরি করুন এবং নিম্নের মত করে কোড লিখুন

	// Source code of $GOPATH/src/mymath/sqrt.go
	package mymath

	func Sqrt(x float64) float64 {
		z := 0.0
		for i := 0; i < 1000; i++ {
			z -= (z*z - x) / (2 * x)
		}
		return z
	}

এখন আমাদের প্যাকেজ ফোল্ডার তৈরি করা হয়েছে এবং কোড লেখা শেষ। আপনি অবশ্যই চেষ্টা করবেন আপনার পাকজের নাম শেষ ফোল্ডারের নামের সাথে মিল রেখে করবেন।

## প্যাকেজ কম্পাইল

আমাদের প্যাকেজ করা শেষ এখন পাকেজ কম্পাইল করব। প্যাকেজ নিম্নের দুইভাবে কম্পাইল করা জায়

১. আপনার প্যাকেজ ফোল্ডারের মধ্যে  প্রবেশ করে `go install` কমান্ড দিন।
২. এই কমান্ড দিন `go install mymath`

কম্পাইল কারার পরে আমরা নিম্নের ফোল্ডার খুঁজে দেখি `mymath.a` নামে একটি ফাইল পাব।

	cd $GOPATH/pkg/${GOOS}_${GOARCH}
	// you can see the file was generated
	mymath.a

`mymath.a` এই ফাইল হচ্ছে আমাদের প্যাকেজের বাইনারী ফাইল। চলুন দেখি কিভাবে এই বাইনারী প্যাকেজ ফাইল ব্যবহার করতে পারি। এই জন্য আমাদের একটা আপ্লিকেশন লিখতে হবে।

`mathapp` নামে একটি নতুন প্যাকেজ তৈরি করি যেটি আমাদের আগের প্যাকেজটি ব্যবহার করবে।

	cd $GOPATH/src
	mkdir mathapp
	cd mathapp
	vim main.go

`main.go` নামে একটি ফাইলে নিম্নের কোড লিখি।

	//$GOPATH/src/mathapp/main.go source code.
	package main

	import (
		"mymath"
		"fmt"
	)

	func main() {
		fmt.Printf("Hello, world. Sqrt(2) = %v\n", mymath.Sqrt(2))
	}

এই প্রোগ্রাম কম্পাইল কারার জন্য আমরা আপ্লিকেশন ফোল্ডারে প্রবেশ করি। আমাদের প্যাকেজের জন্য `$GOPATH/src/mathapp`  এই ফোল্ডারে প্রবেশ করে `go install` কমান্ড রান করি। এখন আপনি `$GOPATH/bin/` ফোল্ডারে `mathapp` নামে একটি ফাইল পাবেন। এই `mathapp` বাইনারী ফাইল রান কারার জন্য টার্মিনালে এই কমান্ড দিলেই হবে `./mathapp`, আপনি নিম্নের মত করে  টার্মিনালে আউটপুট দেখতে পাবেন।

	Hello world. Sqrt(2) = 1.414213562373095

## রিমোট প্যাকেজ ইনস্টলেশন
গো-তে রিমোট প্যাকেজ ইনস্টল কর জন্য বিল্টইন টুল দেয়া আছে, আপনি চাইলে `go get` কমান্ড দিয়ে এটি ব্যবহার করতে পারেন। এটি গিটহাব, গুগল কোড, বিটবাকেট এবং লাঞ্চপ্যাড সহ অনেক ওপেন-সোর্স কমিউনিটি সাপোর্ট করে।

	go get github.com/astaxie/beedb

আপনি `go get -u ...` কমান্ড দিয়ে আপনার প্যাকেজ আপডেট করতে পারেন এবং এটি আপনার প্যাকেজের যত ডিপেন্ডেন্স প্যাকেজগুলোও ইনস্টল করবে।

এই টুল বিভিন্ন ওপেন-সোর্স প্লাটফর্ম এর জন্য বিভিন্ন ভার্সন কন্ট্রোল টুল ব্যবহার করে, যেমনঃ গিটহাবের জন্য `git` এবং গুগল কোডের জন্য `hg`। তাই আপানেক `go get`  ব্যাবহারের আগে এই ভার্সন কন্ট্রোল টুল ইনস্টল করতে হবে।  

উপরের কমান্ড রান কার পরে, নিম্নের মত করে দেখতে পাবঃ

	$GOPATH
		src
		 |-github.com
		 	 |-astaxie
		 	 	 |-beedb
		pkg
		 |--${GOOS}_${GOARCH}
		 	 |-github.com
		 	 	 |-astaxie
		 	 	 	 |-beedb.a

`go get` কমান্ড মূলত সোর্স থেকে ফাইল `$GOPATH/src ` পাথে ক্লোন করে এবং `go install` কমান্ড রান করে।
রিমোট প্যাকেজ লোকাল প্যাকেজের মত একইভাবে ব্যাবহার করে পারেন।  

	import "github.com/astaxie/beedb"

## সম্পূর্ণ ডিরেক্টরি কাঠামো
আপনি যদি উপরের ধাপগুল অনুসরণ করেন তহলে আপনার ডিরেক্টরি কাঠামো নিম্নের মত করে হবে

	bin/
		mathapp
	pkg/
		${GOOS}_${GOARCH}, such as darwin_amd64, linux_amd64
      mymath.a
      github.com/
        astaxie/
          beedb.a
	src/
		mathapp
			main.go
		mymath/
			sqrt.go
		github.com/
			astaxie/
				beedb/
					beedb.go
					util.go

উপরের কাঠামো থেকে দেখা যাচ্ছে `bin` ফোল্ডারে এক্সিকিউটেবল ফাইল, `pkg` ফোল্ডারে কম্পাইল ফাইল এবং `src` ফোল্ডারে প্যাকেজের সোর্স কোড রয়েছে।

(আপনি উইন্ডোজ ব্যাবহার করলে আপনার গো -পাথ ভ্যারিয়েবেল হবে  `%GOPATH%`, এই বইতে মূলত ইউনিক্স স্টাইল অনুসরণ করা হয়েছে)

## লিঙ্ক

- [ডিরেক্টরি](preface.md)
- পূর্ববর্তী ধাপ: [ইনস্টলেশন](01.1.md)
- পরিবর্তী ধাপ: [Go কমান্ড](01.3.md)
